
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="flask-mailing">
      
      
      
        <link rel="canonical" href="https://marktennyson.github.io/flask-mailing/example/">
      
      
        <link rel="prev" href="../getting-started/">
      
      
        <link rel="next" href="../contribute/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.11">
    
    
      
        <title>Example - Flask-MAILING</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#example" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Flask-MAILING" class="md-header__button md-logo" aria-label="Flask-MAILING" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Flask-MAILING
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Example
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/marktennyson/flask-mailing" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    marktennyson/flask-mailing
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Flask-MAILING" class="md-nav__button md-logo" aria-label="Flask-MAILING" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Flask-MAILING
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/marktennyson/flask-mailing" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    marktennyson/flask-mailing
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flask MAILING
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    🔨 Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    🕹 Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Example
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Example
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sending-emails-using-flask-mailing" class="md-nav__link">
    <span class="md-ellipsis">
      Sending emails using Flask-Mailing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-of-examples" class="md-nav__link">
    <span class="md-ellipsis">
      List of Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="List of Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Basic configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-recipient-using-add_recipient-method" class="md-nav__link">
    <span class="md-ellipsis">
      Add recipient using add_recipient method
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#send-a-simple-html-message" class="md-nav__link">
    <span class="md-ellipsis">
      Send a simple html message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sending-files" class="md-nav__link">
    <span class="md-ellipsis">
      Sending files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sending files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sending-files-using-attach-method" class="md-nav__link">
    <span class="md-ellipsis">
      Sending files using attach method
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-jinja2-html-templates" class="md-nav__link">
    <span class="md-ellipsis">
      Using Jinja2 HTML Templates
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using Jinja2 HTML Templates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#legacy-behaviour" class="md-nav__link">
    <span class="md-ellipsis">
      Legacy Behaviour
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-attachments-by-headers-and-mime-type" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing attachments by headers and MIME type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guide-for-email-utils" class="md-nav__link">
    <span class="md-ellipsis">
      Guide for email utils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Guide for email utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-dispasoble-email-address" class="md-nav__link">
    <span class="md-ellipsis">
      Check dispasoble email address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-dispasoble-email-address" class="md-nav__link">
    <span class="md-ellipsis">
      Add dispasoble email address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-domain-to-blocked-list" class="md-nav__link">
    <span class="md-ellipsis">
      Add domain to blocked list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-domain-blocked-or-not" class="md-nav__link">
    <span class="md-ellipsis">
      Check domain blocked or not
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-email-address-to-blocked-list" class="md-nav__link">
    <span class="md-ellipsis">
      Add email address to blocked list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-email-blocked-or-not" class="md-nav__link">
    <span class="md-ellipsis">
      Check email blocked or not
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-mx-record" class="md-nav__link">
    <span class="md-ellipsis">
      Check MX record
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-email-address-from-blocked-list" class="md-nav__link">
    <span class="md-ellipsis">
      Remove email address from blocked list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-domain-from-blocked-list" class="md-nav__link">
    <span class="md-ellipsis">
      Remove domain from blocked list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-domain-from-temporary-list" class="md-nav__link">
    <span class="md-ellipsis">
      Remove domain from temporary list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whoisxmlapi" class="md-nav__link">
    <span class="md-ellipsis">
      WhoIsXmlApi
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contribute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribution
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sending-emails-using-flask-mailing" class="md-nav__link">
    <span class="md-ellipsis">
      Sending emails using Flask-Mailing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-of-examples" class="md-nav__link">
    <span class="md-ellipsis">
      List of Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="List of Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Basic configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-recipient-using-add_recipient-method" class="md-nav__link">
    <span class="md-ellipsis">
      Add recipient using add_recipient method
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#send-a-simple-html-message" class="md-nav__link">
    <span class="md-ellipsis">
      Send a simple html message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sending-files" class="md-nav__link">
    <span class="md-ellipsis">
      Sending files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sending files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sending-files-using-attach-method" class="md-nav__link">
    <span class="md-ellipsis">
      Sending files using attach method
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-jinja2-html-templates" class="md-nav__link">
    <span class="md-ellipsis">
      Using Jinja2 HTML Templates
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using Jinja2 HTML Templates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#legacy-behaviour" class="md-nav__link">
    <span class="md-ellipsis">
      Legacy Behaviour
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-attachments-by-headers-and-mime-type" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing attachments by headers and MIME type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guide-for-email-utils" class="md-nav__link">
    <span class="md-ellipsis">
      Guide for email utils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Guide for email utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-dispasoble-email-address" class="md-nav__link">
    <span class="md-ellipsis">
      Check dispasoble email address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-dispasoble-email-address" class="md-nav__link">
    <span class="md-ellipsis">
      Add dispasoble email address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-domain-to-blocked-list" class="md-nav__link">
    <span class="md-ellipsis">
      Add domain to blocked list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-domain-blocked-or-not" class="md-nav__link">
    <span class="md-ellipsis">
      Check domain blocked or not
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-email-address-to-blocked-list" class="md-nav__link">
    <span class="md-ellipsis">
      Add email address to blocked list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-email-blocked-or-not" class="md-nav__link">
    <span class="md-ellipsis">
      Check email blocked or not
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-mx-record" class="md-nav__link">
    <span class="md-ellipsis">
      Check MX record
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-email-address-from-blocked-list" class="md-nav__link">
    <span class="md-ellipsis">
      Remove email address from blocked list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-domain-from-blocked-list" class="md-nav__link">
    <span class="md-ellipsis">
      Remove domain from blocked list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-domain-from-temporary-list" class="md-nav__link">
    <span class="md-ellipsis">
      Remove domain from temporary list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whoisxmlapi" class="md-nav__link">
    <span class="md-ellipsis">
      WhoIsXmlApi
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h1>
<h2 id="sending-emails-using-flask-mailing">Sending emails using Flask-Mailing<a class="headerlink" href="#sending-emails-using-flask-mailing" title="Permanent link">&para;</a></h2>
<h2 id="list-of-examples">List of Examples<a class="headerlink" href="#list-of-examples" title="Permanent link">&para;</a></h2>
<h3 id="basic-configuration">Basic configuration<a class="headerlink" href="#basic-configuration" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">jsonify</span>
<span class="kn">from</span> <span class="nn">flask_mailing</span> <span class="kn">import</span> <span class="n">Mail</span><span class="p">,</span> <span class="n">Message</span>

<span class="n">mail</span> <span class="o">=</span> <span class="n">Mail</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">create_app</span><span class="p">():</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


    <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_USERNAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;your-email@your-domain.com&quot;</span>
    <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_PASSWORD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;world_top_secret_password&quot;</span>
    <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_PORT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">587</span>
    <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_SERVER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;your-email-server.com&quot;</span>
    <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_USE_TLS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_USE_SSL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">mail</span><span class="o">.</span><span class="n">init_app</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">app</span>

<span class="c1">#send a simple email using flask_mailing module.</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">create_app</span><span class="p">()</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/email&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">simple_send</span><span class="p">():</span>

    <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span>
        <span class="n">subject</span><span class="o">=</span><span class="s2">&quot;Flask-Mailing module&quot;</span><span class="p">,</span>
        <span class="n">recipients</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;aniketsarkar@yahoo.com&quot;</span><span class="p">],</span>
        <span class="n">body</span><span class="o">=</span><span class="s2">&quot;This is the basic email body&quot;</span><span class="p">,</span>
        <span class="p">)</span>


    <span class="k">await</span> <span class="n">mail</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;email has been sent&quot;</span><span class="p">})</span>
</code></pre></div>
<h4 id="add-recipient-using-add_recipient-method">Add recipient using <code>add_recipient</code> method<a class="headerlink" href="#add-recipient-using-add_recipient-method" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="n">message</span><span class="o">.</span><span class="n">add_recipient</span><span class="p">(</span><span class="s2">&quot;recipient@emldomain.com&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="send-a-simple-html-message">Send a simple html message<a class="headerlink" href="#send-a-simple-html-message" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">html</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;p&gt;Hi this test mail, thanks for using Flask-Mailing&lt;/p&gt; </span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/html-email&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">html_email</span><span class="p">():</span>

    <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span>
        <span class="n">subject</span><span class="o">=</span><span class="s2">&quot;Flask-Mailing module test html mail&quot;</span><span class="p">,</span>
        <span class="n">recipients</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;aniketsarkar@yahoo.com&quot;</span><span class="p">],</span>
        <span class="n">body</span><span class="o">=</span><span class="n">html</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="s2">&quot;html&quot;</span>
        <span class="p">)</span>


    <span class="k">await</span> <span class="n">mail</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;email has been sent&quot;</span><span class="p">})</span>
</code></pre></div>
<h3 id="sending-files">Sending files<a class="headerlink" href="#sending-files" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/mail-file&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">mail_file</span><span class="p">():</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span>
        <span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;attachments based email&quot;</span><span class="p">,</span>
        <span class="n">recipients</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;aniketsarkar@yahoo.com&quot;</span><span class="p">],</span>
        <span class="n">body</span> <span class="o">=</span> <span class="s2">&quot;email with attachments, email body.&quot;</span><span class="p">,</span>
        <span class="n">attachments</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;attachments/attachment.txt&#39;</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="k">await</span> <span class="n">mail</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s2">&quot;email sent&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="sending-files-using-attach-method">Sending files using <code>attach</code> method<a class="headerlink" href="#sending-files-using-attach-method" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">open_resource</span><span class="p">(</span><span class="s2">&quot;attachments/example.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
    <span class="n">message</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="s2">&quot;example.txt&quot;</span><span class="p">,</span> <span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</code></pre></div>
<h3 id="using-jinja2-html-templates">Using Jinja2 HTML Templates<a class="headerlink" href="#using-jinja2-html-templates" title="Permanent link">&para;</a></h3>
<p>You can enable Jinja2 HTML Template emails by setting the <code>TEMPLATE_FOLDER</code> configuration option, and supplying a value (which is just the name of the template file within the <code>TEMPLATE_FOLDER</code> dir) for the <code>template_name</code> parameter in <code>Mail.send_message()</code>. You then can pass a Dict as the <code>template_body</code> property of your <code>Message</code> object. If you haven't provided the <code>TEMPLATE_FOLDER</code> configuration option, then the module will take the app's jinja2 environment for templating and you can use templates from app's default template folder:</p>
<p><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;TEMPLATE_FOLDER&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s1">&#39;email-templates&#39;</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Don&#39;t use this configuration if you want to use the default jinja2 environment.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/mail-html&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">mail_html</span><span class="p">():</span>

    <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span>
        <span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;html template based email&quot;</span><span class="p">,</span>
        <span class="n">recipients</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;aniketsarkar@yahoo.com&quot;</span><span class="p">],</span>
        <span class="n">template_body</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;first_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Hare&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;last_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Krishna&quot;</span>
                        <span class="p">}</span>
        <span class="c1"># attachments = [&#39;attachments/attachment.txt&#39;]</span>
    <span class="p">)</span>
    <span class="c1">#or</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span>
        <span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;html template based email&quot;</span><span class="p">,</span>
        <span class="n">recipients</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;aniketsarkar@yahoo.com&quot;</span><span class="p">],</span>
        <span class="n">template_params</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;first_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Hare&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;last_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Krishna&quot;</span>
                        <span class="p">}</span>
        <span class="c1"># attachments = [&#39;attachments/attachment.txt&#39;]</span>
    <span class="p">)</span>

    <span class="k">await</span> <span class="n">mail</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">template_name</span><span class="o">=</span><span class="s2">&quot;test.html&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s2">&quot;email sent&quot;</span><span class="p">)</span>
</code></pre></div>
For example, assume we pass a <code>template_body</code> of:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;first_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Hare&quot;</span><span class="p">,</span>
  <span class="s2">&quot;last_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Krishna&quot;</span>
<span class="p">}</span>
</code></pre></div>
We can reference the variables in our Jinja templates as per normal:
<div class="highlight"><pre><span></span><code>...
<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Hello, {{ first_name }}!<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
...
</code></pre></div></p>
<h4 id="legacy-behaviour">Legacy Behaviour<a class="headerlink" href="#legacy-behaviour" title="Permanent link">&para;</a></h4>
<p>The original behaviour was to wrap the Dict you provide in a variable named <code>body</code> when it was provided to 
Jinja behind the scenes. In these versions, you can then access your dict in your template like so:</p>
<div class="highlight"><pre><span></span><code>...
&lt;span&gt;Hello,  body.first_name !&lt;/span&gt;
...
</code></pre></div>
<p>As you can see our keys in our dict are no longer the top level, they are part of the <code>body</code> variable. Nesting works 
as per normal below this level also. </p>
<h3 id="customizing-attachments-by-headers-and-mime-type">Customizing attachments by headers and MIME type<a class="headerlink" href="#customizing-attachments-by-headers-and-mime-type" title="Permanent link">&para;</a></h3>
<p>Used for example for referencing Content-ID images in html of email</p>
<div class="highlight"><pre><span></span><code><span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span>
    <span class="n">subject</span><span class="o">=</span><span class="s1">&#39;Flask-Mailing module&#39;</span><span class="p">,</span>
    <span class="n">recipients</span><span class="o">=</span><span class="n">recipients</span><span class="p">,</span>
    <span class="n">html</span><span class="o">=</span><span class="s2">&quot;&lt;img src=&#39;cid:logo_image&#39;&gt;&quot;</span><span class="p">,</span>
    <span class="n">subtype</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">,</span>
    <span class="n">attachments</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/file.png&quot;</span><span class="p">),</span>
                <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Content-ID&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;logo_image&gt;&quot;</span><span class="p">},</span>
                <span class="s2">&quot;mime_type&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
                <span class="s2">&quot;mime_subtype&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">],</span>
<span class="p">)</span>

<span class="k">await</span> <span class="n">mail</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre></div>
<h2 id="guide-for-email-utils">Guide for email utils<a class="headerlink" href="#guide-for-email-utils" title="Permanent link">&para;</a></h2>
<p>The utility allows you to check temporary email addresses, you can block any email or domain. 
You can connect Redis to save and check email addresses. If you do not provide a Redis configuration, 
then the utility will save it in the list or set by default.</p>
<h3 id="check-dispasoble-email-address">Check dispasoble email address<a class="headerlink" href="#check-dispasoble-email-address" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">default_checker</span><span class="p">():</span>
    <span class="n">checker</span> <span class="o">=</span> <span class="n">DefaultChecker</span><span class="p">()</span>  <span class="c1"># you can pass source argument for your own email domains</span>
    <span class="k">await</span> <span class="n">checker</span><span class="o">.</span><span class="n">fetch_temp_email_domains</span><span class="p">()</span> <span class="c1"># require to fetch temporary email domains</span>
    <span class="k">return</span> <span class="n">checker</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/email/dispasoble&#39;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">simple_send</span><span class="p">():</span>
    <span class="n">domain</span> <span class="o">=</span> <span class="s2">&quot;gmail.com, </span>
    <span class="n">checker</span> <span class="o">=</span> <span class="k">await</span> <span class="n">default_checker</span><span class="p">()</span>
    <span class="k">if</span> <span class="k">await</span> <span class="n">checker</span><span class="o">.</span><span class="n">is_dispasoble</span><span class="p">(</span><span class="n">domain</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;this is dispasoble domain&#39;</span><span class="p">})</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;email has been sent&#39;</span><span class="p">})</span>
</code></pre></div>
<h3 id="add-dispasoble-email-address">Add dispasoble email address<a class="headerlink" href="#add-dispasoble-email-address" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/email/dispasoble&#39;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">add_disp_domain</span><span class="p">():</span>
    <span class="n">domains</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;gmail.com&quot;</span><span class="p">]</span>
    <span class="n">checker</span><span class="p">:</span> <span class="n">DefaultChecker</span> <span class="o">=</span> <span class="k">await</span> <span class="n">default_checker</span><span class="p">()</span>

    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">checker</span><span class="o">.</span><span class="n">add_temp_domain</span><span class="p">(</span><span class="n">domains</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">res</span><span class="p">})</span>
</code></pre></div>
<h3 id="add-domain-to-blocked-list">Add domain to blocked list<a class="headerlink" href="#add-domain-to-blocked-list" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/email/blocked/domains&#39;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">block_domain</span><span class="p">():</span>
    <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;gmail.com&quot;</span>
    <span class="n">checker</span><span class="p">:</span> <span class="n">DefaultChecker</span> <span class="o">=</span> <span class="k">await</span> <span class="n">default_checker</span><span class="p">()</span>

    <span class="k">await</span> <span class="n">checker</span><span class="o">.</span><span class="n">blacklist_add_domain</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s1"> added to blacklist&#39;</span><span class="p">})</span>
</code></pre></div>
<h3 id="check-domain-blocked-or-not">Check domain blocked or not<a class="headerlink" href="#check-domain-blocked-or-not" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/email/blocked/check-domains&#39;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_blocked_domain</span><span class="p">():</span>
    <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span><span class="s1">&#39;gmail.com&#39;</span>
    <span class="n">checker</span><span class="p">:</span> <span class="n">DefaultChecker</span> <span class="o">=</span> <span class="k">await</span> <span class="n">default_checker</span><span class="p">()</span>
    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">checker</span><span class="o">.</span><span class="n">is_blocked_domain</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">res</span><span class="p">})</span>
</code></pre></div>
<h3 id="add-email-address-to-blocked-list">Add email address to blocked list<a class="headerlink" href="#add-email-address-to-blocked-list" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/email/blocked/address&#39;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">block_address</span><span class="p">():</span>
    <span class="n">email</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span><span class="s1">&#39;hacker@gmail.com&#39;</span>
    <span class="n">checker</span><span class="p">:</span> <span class="n">DefaultChecker</span> <span class="o">=</span> <span class="k">await</span> <span class="n">default_checker</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">checker</span><span class="o">.</span><span class="n">blacklist_add_email</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
</code></pre></div>
<h3 id="check-email-blocked-or-not">Check email blocked or not<a class="headerlink" href="#check-email-blocked-or-not" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/email/blocked/address&#39;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_block_address</span><span class="p">():</span>
    <span class="n">email</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span><span class="s1">&#39;hacker@gmail.com&#39;</span>
    <span class="n">checker</span><span class="p">:</span> <span class="n">DefaultChecker</span> <span class="o">=</span> <span class="k">await</span> <span class="n">default_checker</span><span class="p">()</span>
    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">checker</span><span class="o">.</span><span class="n">is_blocked_address</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">res</span><span class="p">})</span>
</code></pre></div>
<h3 id="check-mx-record">Check MX record<a class="headerlink" href="#check-mx-record" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/email/check-mx&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">check_mx_record</span><span class="p">():</span>
    <span class="n">checker</span> <span class="o">=</span> <span class="k">await</span> <span class="n">default_checker</span><span class="p">()</span>
    <span class="n">domain</span> <span class="o">=</span> <span class="s2">&quot;gmail.com&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">checker</span><span class="o">.</span><span class="n">check_mx_record</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">res</span><span class="p">})</span>
</code></pre></div>
<h3 id="remove-email-address-from-blocked-list">Remove email address from blocked list<a class="headerlink" href="#remove-email-address-from-blocked-list" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/email/blocked/address&#39;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">del_blocked_address</span><span class="p">():</span>
    <span class="n">checker</span> <span class="o">=</span> <span class="k">await</span> <span class="n">default_checker</span><span class="p">()</span>
    <span class="n">email</span> <span class="o">=</span> <span class="s2">&quot;hacker@gmail.com&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">checker</span><span class="o">.</span><span class="n">blacklist_rm_email</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">res</span><span class="p">})</span>
</code></pre></div>
<h3 id="remove-domain-from-blocked-list">Remove domain from blocked list<a class="headerlink" href="#remove-domain-from-blocked-list" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/email/blocked/domains&#39;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">del_blocked_domain</span><span class="p">():</span>
    <span class="n">checker</span> <span class="o">=</span> <span class="k">await</span> <span class="n">default_checker</span><span class="p">()</span>
    <span class="n">domain</span> <span class="o">=</span> <span class="s2">&quot;gmail.com&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">checker</span><span class="o">.</span><span class="n">blacklist_rm_domain</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">res</span><span class="p">})</span>
</code></pre></div>
<h3 id="remove-domain-from-temporary-list">Remove domain from temporary list<a class="headerlink" href="#remove-domain-from-temporary-list" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/email/dispasoblee&#39;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">del_disp_domain</span><span class="p">():</span>
    <span class="n">checker</span> <span class="o">=</span> <span class="k">await</span> <span class="n">default_checker</span><span class="p">()</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;gmail.com&quot;</span><span class="p">]</span>
    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">checker</span><span class="o">.</span><span class="n">blacklist_rm_temp</span><span class="p">(</span><span class="n">domains</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">res</span><span class="p">})</span>
</code></pre></div>
<h3 id="whoisxmlapi">WhoIsXmlApi<a class="headerlink" href="#whoisxmlapi" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask_mailing.utils</span> <span class="kn">import</span> <span class="n">WhoIsXmlApi</span>

<span class="n">who_is</span> <span class="o">=</span> <span class="n">WhoIsXmlApi</span><span class="p">(</span><span class="n">token</span><span class="o">=</span><span class="s2">&quot;Your access token&quot;</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s2">&quot;your@mailaddress.com&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">who_is</span><span class="o">.</span><span class="n">smtp_check_</span><span class="p">())</span>    <span class="c1">#check smtp server</span>
<span class="nb">print</span><span class="p">(</span><span class="n">who_is</span><span class="o">.</span><span class="n">is_dispasoble</span><span class="p">())</span> <span class="c1"># check email is disposable or not</span>
<span class="nb">print</span><span class="p">(</span><span class="n">who_is</span><span class="o">.</span><span class="n">check_mx_record</span><span class="p">())</span> <span class="c1"># check domain mx records </span>
<span class="nb">print</span><span class="p">(</span><span class="n">who_is</span><span class="o">.</span><span class="n">free_check</span><span class="p">)</span> <span class="c1"># check email domain is free or not</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
    
  </body>
</html>